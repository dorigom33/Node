<!DOCTYPE html>
<html>
<head>
  <title>회원가입</title>
  <!-- 구글 플랫폼 라이브러리 추가 -->
  <script src="https://apis.google.com/js/api.js"></script>
  <!-- 제공된 클라이언트 ID를 사용해 구글 로그인 클라이언트 스크립트 로드 -->
  <meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>
<body>
    <h1>회원가입</h1>
    <form action="/signup" method="POST">
        <label for="USER_NAME">이름:</label>
        <input type="text" id="USER_NAME" name="USER_NAME" required>
        <br>

        <label for="USER_EMAIL">이메일:</label>
        <input type="email" id="USER_EMAIL" name="USER_EMAIL" required>
        <br>

        <label for="USER_PW">비밀번호:</label>
        <input type="password" id="USER_PW" name="USER_PW" required>
        <br>

        <label for="USER_ADD">주소:</label>
        <input type="text" id="USER_ADD" name="USER_ADD" required>
        <br>

        <label for="USER_TEL">전화번호:</label>
        <input type="text" id="USER_TEL" name="USER_TEL" required>
        <br>

        <button type="submit">회원가입</button>
    </form>
    <p>이미 회원이신가요? <a href="/login">로그인</a></p>
  <!-- 구글 회원가입 버튼 -->
  <div class="g-signin2" data-onsuccess="onSignup"></div>

  <script>
    const handleSignup = async (googleUser) => {
      try {
        const idToken = googleUser.getAuthResponse().id_token;
        const response = await fetch('/signup', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ idToken }),
        });

        if (response.status === 201) {
          // 회원가입 성공 처리
          const data = await response.json();
          console.log(data.message);
        } else {
          // 회원가입 실패 처리
          console.error('Google 회원가입에 실패했습니다.');
        }
      } catch (error) {
        console.error(error);
      }
    };

    window.onSignup = (googleUser) => {
      handleSignup(googleUser);
    };
  </script>
</body>
</html>
